<div class="settings-container">
  <div class="settings-header">
    <h1>Settings</h1>
    <p>Customize your SmartBudget experience</p>
  </div>

  <!-- Success message -->
  <div class="success-message" *ngIf="successMessage">
    <span class="icon">‚úì</span>
    {{ successMessage }}
  </div>

  <!-- Error message -->
  <div class="error-message" *ngIf="errorMessage">
    <span class="icon">‚ö†</span>
    {{ errorMessage }}
  </div>

  <div class="settings-content">
    <!-- App Settings Section -->
    <div class="settings-section">
      <h2>App Settings</h2>

      <form (ngSubmit)="saveSettings()" #settingsForm="ngForm">
        <!-- Appearance -->
        <div class="settings-group">
          <h3>Appearance</h3>

          <div class="form-group toggle-group">
            <label for="darkMode">Dark Mode</label>
            <div class="toggle-switch">
              <input type="checkbox" id="darkMode" name="darkMode" [(ngModel)]="settings.darkMode">
              <label for="darkMode" class="toggle-label"></label>
            </div>
          </div>
        </div>

        <!-- Notifications -->
        <div class="settings-group">
          <h3>Notifications</h3>

          <div class="form-group toggle-group">
            <label for="notifications">Enable Notifications</label>
            <div class="toggle-switch">
              <input type="checkbox" id="notifications" name="notifications" [(ngModel)]="settings.notifications">
              <label for="notifications" class="toggle-label"></label>
            </div>
          </div>
        </div>

        <!-- Localization -->
        <div class="settings-group">
          <h3>Localization</h3>

          <div class="form-group">
            <label for="currency">Currency</label>
            <select id="currency" name="currency" class="form-control" [(ngModel)]="settings.currency">
              <option *ngFor="let currency of currencies" [value]="currency.code">
                {{ currency.symbol }} - {{ currency.name }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="language">Language</label>
            <select id="language" name="language" class="form-control" [(ngModel)]="settings.language">
              <option *ngFor="let language of languages" [value]="language.code">
                {{ language.name }}
              </option>
            </select>
          </div>
        </div>

        <!-- Backup & Sync -->
        <div class="settings-group">
          <h3>Backup & Sync</h3>

          <div class="form-group">
            <label for="backupFrequency">Automatic Backup Frequency</label>
            <select id="backupFrequency" name="backupFrequency" class="form-control" [(ngModel)]="settings.backupFrequency">
              <option *ngFor="let option of backupOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>
        </div>

        <!-- Save Button -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            <span *ngIf="isLoading">Saving...</span>
            <span *ngIf="!isLoading">Save Settings</span>
          </button>
        </div>
      </form>
    </div>

    <!-- Data Management Section -->
    <div class="settings-section">
      <h2>Data Management</h2>

      <!-- Backup & Restore -->
      <div class="settings-group">
        <h3>Backup & Restore</h3>

        <div class="data-actions">
          <button class="btn btn-secondary" (click)="exportData()">
            <span class="icon">üì§</span> Export Data
          </button>

          <div class="import-container">
            <label for="importFile" class="btn btn-secondary">
              <span class="icon">üì•</span> Import Data
            </label>
            <input type="file" id="importFile" accept=".json" (change)="importData($event)" style="display: none;">
          </div>
        </div>

        <p class="help-text">
          Export creates a backup file of all your data. Import restores data from a previous backup.
        </p>
      </div>

      <!-- Reset Options -->
      <div class="settings-group danger-zone">
        <h3>Danger Zone</h3>

        <div class="data-actions">
          <button class="btn btn-warning" (click)="resetCategories()">
            <span class="icon">üîÑ</span> Reset Categories
          </button>

          <button class="btn btn-danger" (click)="clearAllData()">
            <span class="icon">üóëÔ∏è</span> Factory Reset
          </button>
        </div>

        <p class="help-text warning-text">
          Warning: These actions cannot be undone. Reset Categories will restore default categories.
          Factory Reset will delete ALL your data.
        </p>
      </div>
    </div>
  </div>

  <!-- About Section -->
  <div class="settings-section about-section">
    <h2>About SmartBudget</h2>
    <p>Version 1.0.0</p>
    <p>SmartBudget is a personal finance management application designed to help you track expenses,
      set budgets, and achieve your financial goals.</p>
    <p>¬© 2023 SmartBudget. All rights reserved.</p>
  </div>
</div>
